.fl-asst {
    .fl-asst-window {
        --fl-asst-window-size: 360px;
        --fl-asst-window-toolbar-height: 38px;

        box-sizing: border-box;
        width: var(--fl-asst-window-size);
        max-width: 100vw;
        min-height: 100px;
        overflow: hidden;
        pointer-events: auto;
        touch-action: none;
        border-radius: 0;
        transition-property: background, box-shadow, border-radius;
        transition-duration: .25s;

        box-shadow: 0 0 0 3px var(--fl-asst-secondary-surface-background),
                    0 15px 45px 0 hsla(214, 17%, 41%, 0.25);

        .fl-asst-brightness-dark & {
            border-color: transparent;
            box-shadow: 0 0 0 3px hsla(0, 0%, 26%, .1), 0 1px 5px 0 hsla(0,0,0, .2);
        }

        &.fl-asst-window-mini {
            max-width: 100%;
            max-height: 70vh;
            border-radius: var(--fl-asst-medium-space);
        }
        &.fl-asst-window-normal {
            --fl-asst-window-size: 390px;
            height: 100%;
        }

        &.fl-asst-secondary-content {
            background: var(--fl-asst-secondary-surface-background);
        }

        .fl-asst-window-toolbar {
            box-sizing: border-box;
            flex: 0 0 var(--fl-asst-window-toolbar-height);
            line-height: 1;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            cursor: move;
            user-select:none;
            padding: 0 5px;
            -webkit-user-select: none;
            user-select:none;

            button {
                color: inherit;
                padding:2px 10px;
                background:none;
                line-height: 1;
                display: inline-flex;
                flex-direction: row;
                align-items: center;

                &:focus {
                    outline: none;
                }
            }
            span.fl-asst-window-drag-handle {
                align-items: center;
            }
        }

        .fl-asst-window-content {
            box-sizing: border-box;
            flex: 1 1 auto;
            position: relative;
            display: flex;
            flex-direction: column;
            max-height:100%;
            min-height:0;
        }
    }
    .fl-asst-window-layer-is-dragging {
        .fl-asst-window-mini {
            box-shadow: 0 0 0 3px #16D4F3,
                        0 15px 45px 0 hsla(214, 17%, 41%, 0.25);
        }
        .fl-asst-window-normal {
            box-shadow: 0 0 0 3px #16D4F3,
                        0 15px 45px 0 hsla(214, 17%, 41%, 0.25);
            border-radius: 15px;
            max-height: 96vh;
        }
    }

    .fl-asst-window-button {
        display: flex;
        align-items: center;
        width: 60px;
        height: 60px;
        border-radius: 30px;
        background: var(--fl-asst-surface-background);
        overflow: hidden;
        padding:0;
        pointer-events: auto;
        box-shadow: 0px 10px 20px rgba(0,0,0,.25);

        &:hover {
            background: var(--fl-asst-surface-background);
            box-shadow: 0px 10px 20px rgba(0,0,0,.25);
        }

        &:focus {
            top:0;
            outline: none;
            background: var(--fl-asst-surface-background);
            box-shadow: inset 0px 0px 0px 2px #ffac3b,
                        0px 0px 0px 2px var(--fl-asst-surface-background),
                        0px 10px 20px rgba(0,0,0,.25);
        }
    }

    .fl-asst-window-layer {
        --fl-asst-admin-bar-height: 32px;
        box-sizing: border-box;

        position: fixed;
        top:0;
        left:0;
        bottom:0;
        right:0;
        z-index: 9999999999999; // Yea, cause popup maker pushes the admin bar higher than normal.

        background-color: transparent;
        box-shadow: inset 0px 0px 0px 0px white;
        transition-property: box-shadow, background-color;
        transition-duration: .3s;

        user-select: none;
        touch-action: none;
        pointer-events: none;

        &.fl-asst-window-layer-is-dragging {
            pointer-events: auto;
            box-shadow: inset 0px 0px 0px 4px #16D4F3;
            background-color: hsla(188, 89%, 52%, .15);

            &:after {
                content: '';
                pointer-events: none;
                position: absolute;
                top: 15px;
                left:15px;
                width: 60px;
                height: 60px;
                background: #16D4F3;
                border-radius: 15px;
                z-index: -1;
            }
            &.fl-asst-window-layer-origin-top-left:after {
                display: block;

                body.admin-bar & {
                    top: calc( 15px + var(--fl-asst-admin-bar-height) );
                }
            }
            &.fl-asst-window-layer-origin-top-right:after {
                display: block;
                left: auto;
                right: 15px;

                body.admin-bar & {
                    top: calc( 15px + var(--fl-asst-admin-bar-height) );
                }
            }
            &.fl-asst-window-layer-origin-bottom-left:after {
                display: block;
                top: auto;
                bottom: 15px;
                left: 15px;
            }
            &.fl-asst-window-layer-origin-bottom-right:after {
                display: block;
                top: auto;
                bottom: 15px;
                left: auto;
                right: 15px;
            }
            &.fl-asst-window-size-normal {
                &:after {
                    height: 100vh;
                    width: 40px;
                    top:0 !important;
                    bottom: auto;
                    border-radius: 0;
                }
                &.fl-asst-window-layer-origin-top-left:after,
                &.fl-asst-window-layer-origin-bottom-left:after {
                    right:auto;
                    left:0;
                }
                &.fl-asst-window-layer-origin-top-right:after,
                &.fl-asst-window-layer-origin-bottom-right:after {
                    right: 0;
                    left:auto;
                }
            }
        }

        .fl-asst-window-positioner {
            pointer-events: auto;
        }
    }

    @media screen and ( max-width: 782px ) {
        .fl-asst-window {
            --fl-asst-admin-bar-height: 46px;
            --fl-asst-window-toolbar-height: 46px;
        }
    }
}
